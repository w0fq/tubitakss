<!-- _messages.html -->
<div class="fixed top-4 right-4 z-50 w-full max-w-xs space-y-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="relative p-4 pr-10 rounded-lg shadow-lg border-l-4
                {% if category == 'success' %}
                    bg-green-50 border-green-500 text-green-700
                {% elif category == 'error' %}
                    bg-red-50 border-red-500 text-red-700
                {% elif category == 'warning' %}
                    bg-yellow-50 border-yellow-500 text-yellow-700
                {% else %}
                    bg-blue-50 border-blue-500 text-blue-700
                {% endif %}"
         x-data="{ show: true }"
         x-show="show"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 transform translate-x-8"
         x-transition:enter-end="opacity-100 transform translate-x-0"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100 transform translate-x-0"
         x-transition:leave-end="opacity-0 transform translate-x-8"
         x-init="setTimeout(() => show = false, 5000)">

        <div class="flex items-start">
            <div class="flex-shrink-0 pt-0.5">
                {% if category == 'success' %}
                <i class="fas fa-check-circle text-lg"></i>
                {% elif category == 'error' %}
                <i class="fas fa-times-circle text-lg"></i>
                {% elif category == 'warning' %}
                <i class="fas fa-exclamation-triangle text-lg"></i>
                {% else %}
                <i class="fas fa-info-circle text-lg"></i>
                {% endif %}
            </div>
            <div class="ml-3 flex-1">
                <p class="text-sm font-medium">
                    {{ message }}
                </p>
            </div>
            <button @click="show = false" class="absolute top-3 right-3 text-gray-400 hover:text-gray-500">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
</div>